{% extends 'base.html' %}

{% block content %}
<div style="border: 1px solid #ccc; padding: 16px; margin: 16px; border-radius: 8px;">
    <h1>Available Quizzes</h1>
    
    <div>
        {% for quiz in quizzes %}
        <div style="border: 1px solid #ddd; padding: 12px; margin-bottom: 12px; border-radius: 4px;">
            <h2>{{ quiz.name }}</h2>
            <p>Difficulty: {{ quiz.hardness }}/10</p>
            <p>Questions: {{ quiz.total_questions }}</p>
            
            <div>
                <!-- Completion bar -->
                <div style="background-color: #e2e8f0; border-radius: 4px; height: 16px;">
                    <div style="background-color: #3b82f6; height: 16px; border-radius: 4px; width: {{ quiz.completion }}%;"></div>
                </div>
                <p>Completion: {{ quiz.completion|floatformat:1 }}%</p>
                <p>Score: {{ quiz.score|floatformat:1 }}%</p>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <a href="{% url 'solve_quiz' quiz.id %}" style="padding: 8px 16px; background-color: #3b82f6; color: white; text-decoration: none; border-radius: 4px;">
                    {% if quiz.completion == 100 %}
                        Retake Quiz
                    {% else %}
                        {% if quiz.completion > 0 %}
                            Continue Quiz
                        {% else %}
                            Start Quiz
                        {% endif %}
                    {% endif %}
                </a>
                
                {% if quiz.completion > 0 %}
                <a href="{% url 'quiz_chat' quiz.id %}" style="padding: 8px 16px; background-color: #10b981; color: white; text-decoration: none; border-radius: 4px;">
                    Discuss with AI
                </a>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <p>No quizzes available.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
